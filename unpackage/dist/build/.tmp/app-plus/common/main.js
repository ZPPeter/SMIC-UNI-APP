(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["common/main"],{"15e5":function(t,e,n){"use strict";var a=n("e022"),r=n.n(a);r.a},"1da3":function(t,e,n){"use strict";n.r(e);var a=n("1ff7"),r=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);e["default"]=r.a},"1ff7":function(t,e,n){"use strict";(function(t,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=s(n("a34a")),o=n("2f62"),u=s(n("7e11"));function s(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n,a,r,o,u){try{var s=t[o](u),i=s.value}catch(c){return void n(c)}s.done?e(i):Promise.resolve(i).then(a,r)}function c(t){return function(){var e=this,n=arguments;return new Promise(function(a,r){var o=t.apply(e,n);function u(t){i(o,a,r,u,s,"next",t)}function s(t){i(o,a,r,u,s,"throw",t)}u(void 0)})}}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),a.forEach(function(e){f(t,e,n[e])})}return t}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p={globalData:{userInfoid:""},computed:(0,o.mapState)(["hasLogin","userInfo"]),data:function(){return{UserName:""}},methods:l({},(0,o.mapMutations)(["login"]),{CheckNetworkStatus:function(){t.getNetworkType({success:function(e){"none"===e.networkType&&t.showToast({icon:"none",title:"没有网络!!!"})}})}}),onLaunch:function(){var e=c(r.default.mark(function e(){var n,o=this;return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.CheckNetworkStatus(),t.getStorage({key:"userInfo",success:function(t){o.login(t.data),o.UserName=o.$store.state.userInfo.realname}}),e.next=4,this.$store.dispatch({type:"app/init"});case 4:n=e.sent,this.hasLogin&&(n&&setTimeout(function(){n.user&&(o.$store.state.user.readLastNoticeTime=n.user.readLastNoticeTime)},1e3),this.$signalR.connection(u.default.SignalR)),console.log(a("App Launch"," at App.vue:90")),plus.screen.lockOrientation("portrait-primary");case 8:case"end":return e.stop()}},e,this)}));function n(){return e.apply(this,arguments)}return n}(),onShow:function(){console.log(a("App Show"," at App.vue:126"))},onHide:function(){console.log(a("App Hide"," at App.vue:129"))},created:function(){console.log(a("App created"," at App.vue:133"))}};e.default=p}).call(this,n("6e42")["default"],n("0de9")["default"])},"58e0":function(t,e,n){"use strict";(function(t,e,a){var r=v(n("a34a"));n("d2ee"),n("921b");var o=v(n("66fd")),u=v(n("cbfe")),s=v(n("99d4")),i=v(n("8f37")),c=v(n("7e11")),l=v(n("903d")),f=h(n("0933")),p=v(n("179b")),d=v(n("dd33"));function h(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};a.get||a.set?Object.defineProperty(e,n,a):e[n]=t[n]}return e.default=t,e}function v(t){return t&&t.__esModule?t:{default:t}}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),a.forEach(function(e){y(t,e,n[e])})}return t}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function w(t,e,n,a,r,o,u){try{var s=t[o](u),i=s.value}catch(c){return void n(c)}s.done?e(i):Promise.resolve(i).then(a,r)}function g(t){return function(){var e=this,n=arguments;return new Promise(function(a,r){var o=t.apply(e,n);function u(t){w(o,a,r,u,s,"next",t)}function s(t){w(o,a,r,u,s,"throw",t)}u(void 0)})}}var b=new l.default.ShowHomeData;Object.keys(f).forEach(function(t){o.default.filter(t,f[t])}),o.default.prototype.$abp=p.default,o.default.config.productionTip=!1;var O=n("65dc"),k=new O.signalR;o.default.prototype.$signalR=k,o.default.prototype.$store=s.default,o.default.prototype.$moment=i.default,u.default.mpType="app";var D=function(){return n.e("node-modules/uni-simple-router/component/router-link").then(n.bind(null,"a876"))};function j(){return P.apply(this,arguments)}function P(){return P=g(r.default.mark(function t(){return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.connection(c.default.SignalR);case 3:t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.log(e(t.t0," at main.js:135"));case 9:case"end":return t.stop()}},t,this,[[0,6]])})),P.apply(this,arguments)}o.default.component("router-link",D),k.on("ReceiveMessage",function(){var e=g(r.default.mark(function e(n){var a,o;return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:s.default.state.connCount=0,a=JSON.parse(n),o=s.default.state.userInfo.realname,2==a.MessageType&&("NewNotices"==a.MessageBody?(s.default.state.user.newNotices=1,t.showTabBarRedDot({index:4})):"latestData.Data"==a.MessageBody&&b.showData()),98==a.MessageType&&(a.MessageBody.replace("[PC]","").replace("[App]","").trim()!=o?t.showToast({icon:"none",position:"top",title:"用户: "+a.MessageBody+" 上线了"}):b.showData());case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),k.on("connection",function(){var t={messageType:1,sendUserId:s.default.state.userInfo.realname+" [App]",messageBody:"online"};k.sendMessage(JSON.stringify(t))}),k.on("close",g(r.default.mark(function e(){return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s.default.state.latestData.List.length=0,s.default.state.latestData.List.push(" 注意：已经与服务器断开连接!"),s.default.state.latestData.List.push(" 连接服务器."),s.default.state.latestData.List.push(" 连接服务器.."),s.default.state.latestData.List.push(" 连接服务器..."),t.showModal({showCancel:!1,content:"注意：已经与服务器断开连接!"}),e.next=8,j();case 8:case"end":return e.stop()}},e,this)}))),k.on("error",function(){var t=g(r.default.mark(function t(e){return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:s.default.state.connCount=s.default.state.connCount+1,1==s.default.state.connCount&&(s.default.state.latestData.List.length=0,s.default.state.latestData.List.push(" 注意：已经与服务器断开连接!"),s.default.state.latestData.List.push(" 连接服务器."),s.default.state.latestData.List.push(" 连接服务器.."),s.default.state.latestData.List.push(" 连接服务器..."),s.default.state.connCount=0),setTimeout(function(){return j()},5e3);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}());var L=new o.default(m({store:s.default,router:d.default},u.default));a(L).$mount()}).call(this,n("6e42")["default"],n("0de9")["default"],n("6e42")["createApp"])},"93f8":function(t,e,n){"use strict";var a=n("c8d2"),r=n.n(a);r.a},c8d2:function(t,e,n){},cbfe:function(t,e,n){"use strict";n.r(e);var a=n("1da3");for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);n("93f8"),n("15e5");var o,u,s,i,c=n("f0c5"),l=Object(c["a"])(a["default"],o,u,!1,null,null,null,!1,s,i);e["default"]=l.exports},e022:function(t,e,n){}},[["58e0","common/runtime","common/vendor"]]]);